{% extends "layouts/base.html" %}
{% import "macros.html" as macros %}

{% block title %}{{ title | default(value="User Profile") }} - {{ user.name }}{% endblock %}

{% block extra_styles %}
<style>
    .profile-header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 40px; border-radius: 15px; margin-bottom: 30px; }
    .profile-avatar { width: 100px; height: 100px; background: rgba(255,255,255,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2em; margin-bottom: 20px; }
    .profile-info { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
    .info-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px; }
    .info-card { background: #f8f9fa; padding: 20px; border-radius: 10px; border-left: 4px solid #667eea; }
    .info-label { font-weight: bold; color: #495057; margin-bottom: 5px; }
    .info-value { color: #212529; font-size: 1.1em; }
    .role-badge { display: inline-block; padding: 5px 15px; border-radius: 20px; font-size: 0.9em; font-weight: bold; }
    .role-admin { background: #dc3545; color: white; }
    .role-member { background: #28a745; color: white; }
    .role-mod { background: #ffc107; color: #212529; }
    .actions { margin-top: 30px; text-align: center; }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <div class="profile-header">
        <div class="profile-avatar">
            {{ macros::first(value=user.name) }}
        </div>
        <h1>{{ user.name }}</h1>
        <p>User ID: {{ user.id }}</p>
        {% if user.role %}
            {{ macros::role_badge(role=user.role) }}
        {% endif %}
    </div>
    
    <div class="profile-info">
        <h2>Profile Information</h2>
        
        <div class="info-grid">
            {{ macros::info_card(label="Full Name", value=user.name, icon="üë§") }}
            {{ macros::info_card(label="Email Address", value=user.email, icon="üìß") }}
            {{ macros::info_card(label="User Role", value=macros::role_badge(role=user.role), icon="üîë") }}
            {{ macros::info_card(label="Profile Created", value=timestamp | default(value="Unknown"), icon="üìÖ") }}
        </div>
        
        {% if isAdmin %}
            <div style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 10px; padding: 20px; margin-top: 20px;">
                <h3>üîê Administrator Access</h3>
                <p>You have full administrative privileges. Use them responsibly!</p>
                <ul>
                    <li>Manage all users</li>
                    <li>Access system logs</li>
                    <li>Configure system settings</li>
                    <li>Database administration</li>
                </ul>
            </div>
        {% endif %}
        
        <div class="actions">
            {{ macros::button(text="Back to Home", href="/", style="primary") }}
            {{ macros::button(text="Edit Profile", href="/user/" ~ user.id ~ "/edit", style="secondary") }}
        </div>
    </div>
</div>
{% endblock %}
