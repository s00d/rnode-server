<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RNode Server - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—ç—à–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .server-info {
            background: #f8f9fa;
            padding: 20px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .status {
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .content {
            padding: 30px;
        }

        .section {
            margin-bottom: 40px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
        }

        .section h2 {
            color: #495057;
            margin-bottom: 20px;
            font-size: 1.5em;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
        }

        .form-group input, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-secondary:hover {
            box-shadow: 0 5px 15px rgba(108, 117, 125, 0.4);
        }

        .btn-danger {
            background: #dc3545;
        }

        .btn-danger:hover {
            box-shadow: 0 5px 15px rgba(220, 53, 69, 0.4);
        }

        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            background: white;
            border-left: 4px solid #667eea;
            display: none;
        }

        .result.show {
            display: block;
        }

        .result.success {
            border-left-color: #28a745;
            background: #f8fff9;
        }

        .result.error {
            border-left-color: #dc3545;
            background: #fff8f8;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: #667eea;
            font-weight: 600;
        }

        .loading.show {
            display: block;
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .quick-btn {
            background: white;
            border: 2px solid #e9ecef;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            font-weight: 600;
            color: #495057;
        }

        .quick-btn:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .auto-tests {
            background: #e3f2fd;
            border: 2px solid #2196f3;
        }

        .auto-tests:hover {
            border-color: #1976d2;
        }

        pre {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 12px;
            border: 1px solid #e9ecef;
        }

        .host-info {
            font-size: 0.9em;
            color: #6c757d;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ RNode Server</h1>
            <p>–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</p>
        </div>

        <div class="server-info">
            <div>
                <strong>–°–µ—Ä–≤–µ—Ä:</strong> <span id="serverUrl">–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ...</span>
                <div class="host-info">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ö–æ—Å—Ç–∞</div>
            </div>
            <div class="status info" id="status">–ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é</div>
        </div>

        <div class="content">
            <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ -->
            <div class="section">
                <h2>üîß –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</h2>
                
                <!-- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è -->
                <div class="form-group">
                    <label for="setKey">–ö–ª—é—á:</label>
                    <input type="text" id="setKey" placeholder="example:key" value="test:key">
                </div>
                <div class="form-group">
                    <label for="setValue">–ó–Ω–∞—á–µ–Ω–∏–µ:</label>
                    <textarea id="setValue" rows="3" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è">{"message": "Hello from cache!", "timestamp": "2024-01-01T00:00:00Z"}</textarea>
                </div>
                <div class="form-group">
                    <label for="setTtl">TTL (—Å–µ–∫—É–Ω–¥—ã):</label>
                    <input type="number" id="setTtl" placeholder="3600" value="3600">
                </div>
                <button class="btn" onclick="setValue()">üíæ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ</button>
                
                <div class="loading" id="setLoading">–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è...</div>
                <div class="result" id="setResult"></div>
            </div>

            <!-- –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è -->
            <div class="section">
                <h2>üìñ –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è</h2>
                <div class="form-group">
                    <label for="getKey">–ö–ª—é—á:</label>
                    <input type="text" id="getKey" placeholder="example:key" value="test:key">
                </div>
                <button class="btn" onclick="getValue()">üîç –ü–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ</button>
                
                <div class="loading" id="getLoading">–ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è...</div>
                <div class="result" id="getResult"></div>
            </div>

            <!-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è -->
            <div class="section">
                <h2>üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è</h2>
                <div class="form-group">
                    <label for="existsKey">–ö–ª—é—á:</label>
                    <input type="text" id="existsKey" placeholder="example:key" value="test:key">
                </div>
                <button class="btn" onclick="checkExists()">‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ</button>
                
                <div class="loading" id="existsLoading">–ü—Ä–æ–≤–µ—Ä–∫–∞...</div>
                <div class="result" id="existsResult"></div>
            </div>

            <!-- –£–¥–∞–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è -->
            <div class="section">
                <h2>üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è</h2>
                <div class="form-group">
                    <label for="deleteKey">–ö–ª—é—á:</label>
                    <input type="text" id="deleteKey" placeholder="example:key" value="test:key">
                </div>
                <button class="btn btn-danger" onclick="deleteValue()">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ</button>
                
                <div class="loading" id="deleteLoading">–£–¥–∞–ª–µ–Ω–∏–µ...</div>
                <div class="result" id="deleteResult"></div>
            </div>

            <!-- –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ -->
            <div class="section">
                <h2>üßπ –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞</h2>
                <p>–£–¥–∞–ª—è–µ—Ç –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –∫—ç—à–∞</p>
                <button class="btn btn-danger" onclick="clearCache()">üßπ –û—á–∏—Å—Ç–∏—Ç—å –≤–µ—Å—å –∫—ç—à</button>
                
                <div class="loading" id="clearLoading">–û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞...</div>
                <div class="result" id="clearResult"></div>
            </div>
        </div>
    </div>

    <script>
        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–µ–∫—É—â–∏–π —Ö–æ—Å—Ç
        const currentHost = window.location.protocol + '//' + window.location.host;
        document.getElementById('serverUrl').textContent = currentHost;

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
        async function apiCall(endpoint, options = {}) {
            const url = `${currentHost}${endpoint}`;
            const response = await fetch(url, {
                headers: {
                    'Content-Type': 'application/json',
                },
                ...options
            });
            return await response.json();
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI
        function updateStatus(message, type = 'info') {
            const statusElement = document.getElementById('status');
            statusElement.textContent = message;
            statusElement.className = `status ${type}`;
        }

        function showLoading(elementId) {
            document.getElementById(elementId).classList.add('show');
        }

        function hideLoading(elementId) {
            document.getElementById(elementId).classList.remove('show');
        }

        function showResult(elementId, data, isSuccess = true) {
            const element = document.getElementById(elementId);
            element.innerHTML = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
            element.className = `result show ${isSuccess ? 'success' : 'error'}`;
        }

        function showError(elementId, error) {
            const element = document.getElementById(elementId);
            element.innerHTML = `<strong>–û—à–∏–±–∫–∞:</strong> ${error}`;
            element.className = 'result show error';
        }

        // –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫—ç—à–∞
        async function setValue() {
            const key = document.getElementById('setKey').value;
            const value = document.getElementById('setValue').value;
            const ttl = parseInt(document.getElementById('setTtl').value) || 3600;

            if (!key || !value) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á –∏ –∑–Ω–∞—á–µ–Ω–∏–µ');
                return;
            }

            showLoading('setLoading');
            updateStatus('–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∫—ç—à...', 'info');

            try {
                const result = await apiCall('/api/cache/set', {
                    method: 'POST',
                    body: JSON.stringify({ key, value, ttl })
                });

                hideLoading('setLoading');
                showResult('setResult', result, result.success);
                updateStatus(result.success ? '–ó–Ω–∞—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ' : '–û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏', result.success ? 'success' : 'error');
            } catch (error) {
                hideLoading('setLoading');
                showError('setResult', error.message);
                updateStatus('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏', 'error');
            }
        }

        async function getValue() {
            const key = document.getElementById('getKey').value;

            if (!key) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á');
                return;
            }

            showLoading('getLoading');
            updateStatus('–ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –∫—ç—à–∞...', 'info');

            try {
                const result = await apiCall(`/api/cache/get/${key}`);

                hideLoading('getLoading');
                showResult('getResult', result, result.success);
                updateStatus(result.success ? '–ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–æ' : '–ö–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω', result.success ? 'success' : 'info');
            } catch (error) {
                hideLoading('getLoading');
                showError('getResult', error.message);
                updateStatus('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏', 'error');
            }
        }

        async function checkExists() {
            const key = document.getElementById('existsKey').value;

            if (!key) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á');
                return;
            }

            showLoading('existsLoading');
            updateStatus('–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∫–ª—é—á–∞...', 'info');

            try {
                const result = await apiCall(`/api/cache/exists/${key}`);

                hideLoading('existsLoading');
                showResult('existsResult', result, result.success);
                updateStatus(`–ö–ª—é—á ${result.exists ? '—Å—É—â–µ—Å—Ç–≤—É–µ—Ç' : '–Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç'}`, result.exists ? 'success' : 'info');
            } catch (error) {
                hideLoading('existsLoading');
                showError('existsResult', error.message);
                updateStatus('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏', 'error');
            }
        }

        async function deleteValue() {
            const key = document.getElementById('deleteKey').value;

            if (!key) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á');
                return;
            }

            showLoading('deleteLoading');
            updateStatus('–£–¥–∞–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –∫—ç—à–∞...', 'info');

            try {
                const result = await apiCall(`/api/cache/delete/${key}`, {
                    method: 'DELETE'
                });

                hideLoading('deleteLoading');
                showResult('deleteResult', result, result.success);
                updateStatus(result.success ? '–ó–Ω–∞—á–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–æ' : '–ö–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω', result.success ? 'success' : 'info');
            } catch (error) {
                hideLoading('deleteLoading');
                showError('deleteResult', error.message);
                updateStatus('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏', 'error');
            }
        }

        async function clearCache() {
            if (!confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å –≤–µ—Å—å –∫—ç—à?')) {
                return;
            }

            showLoading('clearLoading');
            updateStatus('–û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞...', 'info');

            try {
                const result = await apiCall('/api/cache/clear', {
                    method: 'POST'
                });

                hideLoading('clearLoading');
                showResult('clearResult', result, result.success);
                updateStatus(result.success ? '–ö—ç—à –æ—á–∏—â–µ–Ω' : '–û—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∏', result.success ? 'success' : 'error');
            } catch (error) {
                hideLoading('clearLoading');
                showError('clearResult', error.message);
                updateStatus('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏', 'error');
            }
        }

        // –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        async function testBasicCache() {
            updateStatus('–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ –∫—ç—à–∞...', 'info');
            
            try {
                // –¢–µ—Å—Ç 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞
                const setResult = await apiCall('/api/cache/set', {
                    method: 'POST',
                    body: JSON.stringify({
                        key: 'test:basic',
                        value: {
                            message: 'Hello from cache!',
                            timestamp: new Date().toISOString(),
                            random: Math.random()
                        },
                        ttl: 3600
                    })
                });

                if (!setResult.success) {
                    throw new Error('–û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–Ω–∞—á–µ–Ω–∏—è');
                }

                // –¢–µ—Å—Ç 2: –ü–æ–ª—É—á–µ–Ω–∏–µ
                const getResult = await apiCall('/api/cache/get/test:basic');
                
                if (!getResult.success) {
                    throw new Error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è');
                }

                // –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è
                const existsResult = await apiCall('/api/cache/exists/test:basic');
                
                if (!existsResult.exists) {
                    throw new Error('–ö–ª—é—á –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏');
                }

                // –¢–µ—Å—Ç 4: –£–¥–∞–ª–µ–Ω–∏–µ
                const deleteResult = await apiCall('/api/cache/delete/test:basic', {
                    method: 'DELETE'
                });

                if (!deleteResult.success) {
                    throw new Error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è');
                }

                // –¢–µ—Å—Ç 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è
                const existsAfterDelete = await apiCall('/api/cache/exists/test:basic');
                
                if (existsAfterDelete.exists) {
                    throw new Error('–ö–ª—é—á –≤—Å–µ –µ—â–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è');
                }

                updateStatus('–ë–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω —É—Å–ø–µ—à–Ω–æ!', 'success');
                alert('‚úÖ –ë–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç –∫—ç—à–∞ –ø—Ä–æ–π–¥–µ–Ω —É—Å–ø–µ—à–Ω–æ!');
            } catch (error) {
                updateStatus('–û—à–∏–±–∫–∞ –≤ –±–∞–∑–æ–≤–æ–º —Ç–µ—Å—Ç–µ', 'error');
                alert(`‚ùå –û—à–∏–±–∫–∞ –≤ –±–∞–∑–æ–≤–æ–º —Ç–µ—Å—Ç–µ: ${error.message}`);
            }
        }

        async function testTTL() {
            updateStatus('–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ TTL...', 'info');
            
            try {
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —Å TTL = 3 —Å–µ–∫—É–Ω–¥—ã
                const setResult = await apiCall('/api/cache/set', {
                    method: 'POST',
                    body: JSON.stringify({
                        key: 'test:ttl',
                        value: 'This will expire soon',
                        ttl: 3
                    })
                });

                if (!setResult.success) {
                    throw new Error('–û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–Ω–∞—á–µ–Ω–∏—è —Å TTL');
                }

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ä–∞–∑—É
                const immediateGet = await apiCall('/api/cache/get/test:ttl');
                
                if (!immediateGet.success) {
                    throw new Error('–ó–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏');
                }

                // –ñ–¥–µ–º 4 —Å–µ–∫—É–Ω–¥—ã –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å–Ω–æ–≤–∞
                setTimeout(async () => {
                    const delayedGet = await apiCall('/api/cache/get/test:ttl');
                    
                    if (delayedGet.success) {
                        updateStatus('TTL –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –∏—Å—Ç–µ–∫–ª–æ', 'error');
                        alert('‚ùå TTL –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –∏—Å—Ç–µ–∫–ª–æ —á–µ—Ä–µ–∑ 4 —Å–µ–∫—É–Ω–¥—ã');
                    } else {
                        updateStatus('TTL —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!', 'success');
                        alert('‚úÖ TTL —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!');
                    }
                }, 4000);

                updateStatus('TTL —Ç–µ—Å—Ç –∑–∞–ø—É—â–µ–Ω, –æ–∂–∏–¥–∞–Ω–∏–µ 4 —Å–µ–∫—É–Ω–¥—ã...', 'info');
            } catch (error) {
                updateStatus('–û—à–∏–±–∫–∞ –≤ TTL —Ç–µ—Å—Ç–µ', 'error');
                alert(`‚ùå –û—à–∏–±–∫–∞ –≤ TTL —Ç–µ—Å—Ç–µ: ${error.message}`);
            }
        }

        async function testClear() {
            updateStatus('–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—á–∏—Å—Ç–∫–∏ –∫—ç—à–∞...', 'info');
            
            try {
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏–π
                const keys = ['test:clear:1', 'test:clear:2', 'test:clear:3'];
                
                for (const key of keys) {
                    await apiCall('/api/cache/set', {
                        method: 'POST',
                        body: JSON.stringify({
                            key,
                            value: `value for ${key}`,
                            ttl: 3600
                        })
                    });
                }

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –æ–Ω–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
                for (const key of keys) {
                    const exists = await apiCall(`/api/cache/exists/${key}`);
                    if (!exists.exists) {
                        throw new Error(`–ö–ª—é—á ${key} –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏`);
                    }
                }

                // –û—á–∏—â–∞–µ–º –∫—ç—à
                const clearResult = await apiCall('/api/cache/clear', {
                    method: 'POST'
                });

                if (!clearResult.success) {
                    throw new Error('–û—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –∫—ç—à–∞');
                }

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –æ–Ω–∏ —É–¥–∞–ª–µ–Ω—ã
                for (const key of keys) {
                    const exists = await apiCall(`/api/cache/exists/${key}`);
                    if (exists.exists) {
                        throw new Error(`–ö–ª—é—á ${key} –≤—Å–µ –µ—â–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏`);
                    }
                }

                updateStatus('–¢–µ—Å—Ç –æ—á–∏—Å—Ç–∫–∏ –ø—Ä–æ–π–¥–µ–Ω —É—Å–ø–µ—à–Ω–æ!', 'success');
                alert('‚úÖ –¢–µ—Å—Ç –æ—á–∏—Å—Ç–∫–∏ –∫—ç—à–∞ –ø—Ä–æ–π–¥–µ–Ω —É—Å–ø–µ—à–Ω–æ!');
            } catch (error) {
                updateStatus('–û—à–∏–±–∫–∞ –≤ —Ç–µ—Å—Ç–µ –æ—á–∏—Å—Ç–∫–∏', 'error');
                alert(`‚ùå –û—à–∏–±–∫–∞ –≤ —Ç–µ—Å—Ç–µ –æ—á–∏—Å—Ç–∫–∏: ${error.message}`);
            }
        }

        async function runAllTests() {
            updateStatus('–ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤...', 'info');
            
            try {
                await testBasicCache();
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                await testTTL();
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                await testClear();
                
                updateStatus('–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!', 'success');
                alert('üéâ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!');
            } catch (error) {
                updateStatus('–û—à–∏–±–∫–∞ –≤ —Ç–µ—Å—Ç–∞—Ö', 'error');
                alert(`‚ùå –û—à–∏–±–∫–∞ –≤ —Ç–µ—Å—Ç–∞—Ö: ${error.message}`);
            }
        }
    </script>
</body>
</html>
